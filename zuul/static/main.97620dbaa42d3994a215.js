(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"1EMz":function(e,n,t){e.exports=t.p+"2d45371475e943735635b25d8e7fb892.png"},IHiy:function(e,n,t){"use strict";(function(e){t("+eM2"),t("IoGJ"),t("5E8W");var n,a=t("KHwQ"),r=(n=a)&&n.__esModule?n:{default:n};t("bFPc"),t("KqSh");var s=t("KMmB");r.default.module("zuulStatus",[]).controller("mainController",["$scope","$http","$location",function(n,t,a){!function(e,n){var t=void 0,a=void 0,r=new URL(window.location),i={};if("undefined"!=typeof BuiltinConfig)i.source=BuiltinConfig.api_endpoint+"/status";else if(r.searchParams.has("source_url"))i.source=r.searchParams.get("source_url")+"/status";else if(r.searchParams.has("demo")){var l=r.searchParams.get("demo")||"basic";"basic"===l?i.source_data=DemoStatusBasic:"openstack"===l?i.source_data=DemoStatusOpenStack:"tree"===l&&(i.source_data=DemoStatusTree)}else i.source=(0,s.getSourceUrl)("status",n);var o=e.zuul(i);o.jq.on("update-start",function(){t.addClass("zuul-container-loading"),a.addClass("zuul-spinner-on")}),o.jq.on("update-end",function(){t.removeClass("zuul-container-loading"),setTimeout(function(){a.removeClass("zuul-spinner-on")},500)}),o.jq.one("update-end",function(){setTimeout(function(){t.addClass("zuul-container-ready")})}),e(function(e){t=e("#zuul-container"),a=e("#zuul-spinner"),e("#zuul_controls").append(o.app.controlForm()),o.app.schedule(),e(document).on({"show.visibility":function(){o.options.enabled=!0,o.app.update()},"hide.visibility":function(){o.options.enabled=!1}})})}(e,a)}])}).call(this,t("EVdn"))},KMmB:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getSourceUrl=function(e,n){if("undefined"!=typeof ZUUL_API_URL)return ZUUL_API_URL+"/api/"+e;var t=new URL(window.location),a=function(e){if(e.includes("/t/")){var n=e.lastIndexOf("/t/")+3,t=e.indexOf("/",n);return e.slice(n,t)}return null}(t.href),r=(s=t.pathname).includes("/t/")?s.slice(0,s.lastIndexOf("/t/")+1):s.split("/").slice(0,-1).join("/")+"/";return a?r+"api/tenant/"+a+"/"+e:r+"api/"+e;var s}},KqSh:function(e,n,t){"use strict";(function(e){var n=u(t("bIJW")),a=u(t("TmGq")),r=u(t("1EMz")),s=u(t("yHTP")),i=u(t("gFoc")),l=u(t("a/ca")),o=u(t("xlo8"));function u(e){return e&&e.__esModule?e:{default:e}}!function(e){function t(e,n){document.cookie=e+"="+n+"; path=/"}function u(e,n){for(var t=e+"=",a=document.cookie.split(";"),r=0;r<a.length;r++){for(var s=a[r];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return n}e.zuul=function(c){c=e.extend({enabled:!0,graphite_url:"",source:"status",source_data:null,msg_id:"#zuul_msg",pipelines_id:"#zuul_pipelines",queue_events_num:"#zuul_queue_events_num",queue_management_events_num:"#zuul_queue_management_events_num",queue_results_num:"#zuul_queue_results_num"},c);var d=[],p=u("zuul_filter_string",""),f=window.location.href.split("#")[1];f&&(p=f);var h=void 0,g=void 0,_=0,m={};var b={job:function(n){var t=e("<span />");return null!==n.result?t.append(e("<a />").addClass("zuul-job-name").attr("href",n.report_url).text(n.name)):null!==n.url?t.append(e("<a />").addClass("zuul-job-name").attr("href",n.url).text(n.name)):t.append(e("<span />").addClass("zuul-job-name").text(n.name)),t.append(this.job_status(n)),!1===n.voting&&t.append(e(" <small />").addClass("zuul-non-voting-desc").text(" (non-voting)")),t.append(e('<div style="clear: both"></div>')),t},job_status:function(e){var n=e.result?e.result.toLowerCase():null;return null===n&&(n=e.url?"in progress":"queued"),"in progress"===n?this.job_progress_bar(e.elapsed_time,e.remaining_time):this.status_label(n)},status_label:function(n){var t=e("<span />");switch(t.addClass("zuul-job-result label"),n){case"success":t.addClass("label-success");break;case"failure":t.addClass("label-danger");break;case"unstable":t.addClass("label-warning");break;case"skipped":t.addClass("label-info");break;default:t.addClass("label-default")}return t.text(n),t},job_progress_bar:function(n,t){var a=n/(n+t)*100,r=e("<div />").addClass("progress-bar").attr("role","progressbar").attr("aria-valuenow","progressbar").attr("aria-valuemin",a).attr("aria-valuemin","0").attr("aria-valuemax","100").css("width",a+"%");return e("<div />").addClass("progress zuul-job-result").append(r)},enqueueTime:function(e){var n=Date.now()-e,t="text-success",a=this.time(n,!0);return n>144e5?t="text-danger":n>72e5&&(t="text-warning"),'<span class="'+t+'">'+a+"</span>"},time:function(e,n){void 0===n&&(n=!1);var t=+e/1e3,a=Math.floor(t/60),r=Math.floor(a/60);t=Math.floor(t%60),a=Math.floor(a%60);var s="";return n?(r&&(s+=r,s+=" hr "),s+=a+" min"):(r<10&&(s+="0"),s+=r+":",a<10&&(s+="0"),s+=a+":",t<10&&(s+="0"),s+=t),s},changeTotalProgressBar:function(n){var t=Math.floor(100/n.jobs.length),a=e("<div />").addClass("progress zuul-change-total-result");return e.each(n.jobs,function(n,r){var s=r.result?r.result.toLowerCase():null;if(null===s&&(s=r.url?"in progress":"queued"),"queued"!==s){var i=e("<div />").addClass("progress-bar");switch(s){case"success":i.addClass("progress-bar-success");break;case"lost":case"failure":i.addClass("progress-bar-danger");break;case"unstable":i.addClass("progress-bar-warning")}i.attr("title",r.name).css("width",t+"%"),a.append(i)}}),a},changeHeader:function(n){var t=n.id||"NA",a=e("<small />");if(null!==n.url){var r=t.match(/^([0-9]+),([0-9a-f]{40})$/);if(r)a.append(e("<a />").attr("href",n.url).append(e("<abbr />").attr("title",t).text("#"+r[1])));else if(/^[0-9a-f]{40}$/.test(t)){var s=t.slice(0,7);a.append(e("<a />").attr("href",n.url).append(e("<abbr />").attr("title",t).text(s)))}else a.append(e("<a />").attr("href",n.url).text(t))}else 40===t.length&&(t=t.substr(0,7)),a.text(t);var i=e("<div />").addClass("col-xs-4").append(a),l=e("<div />").addClass("col-xs-8").append(this.changeTotalProgressBar(n)),o=e("<div />").addClass("row").append(i).append(l),u=e("<span />").addClass("change_project").text(n.project),c=e("<div />").addClass("col-xs-8").append(u,o),d=this.time(n.remaining_time,!0),p=this.enqueueTime(n.enqueue_time),f=e("<small />").addClass("time").attr("title","Remaining Time").html(d),h=e("<small />").addClass("time").attr("title","Elapsed Time").html(p),g=e("<div />");return!0===n.live&&g.addClass("col-xs-4 text-right").append(f,e("<br />"),h),e("<div />").addClass("row").append(c,g)},change_list:function(n){var t=this,a=e("<ul />").addClass("list-group zuul-patchset-body");return e.each(n,function(n,r){var s=e("<li />").addClass("list-group-item").addClass("zuul-change-job").append(t.job(r));a.append(s)}),a},changePanel:function(n){var t=e("<div />").addClass("panel-heading zuul-patchset-header").append(this.changeHeader(n)),a=n.id?n.id.replace(",","_"):n.project.replace("/","_")+"-"+n.enqueue_time,r=e("<div />").attr("id",a).addClass("panel panel-default zuul-change").append(t).append(this.change_list(n.jobs));return t.click(this.toggle_patchset),r},change_status_icon:function(t){var i=r.default,l="Succeeding";if(!0!==t.active)i=a.default,l="Waiting until closer to head of queue to start jobs";else if(!0!==t.live)i=a.default,l="Dependent change required for testing";else if(t.failing_reasons&&t.failing_reasons.length>0){var o=t.failing_reasons.join(", ");l="Failing because "+o,i=o.match(/merge conflict/)?s.default:n.default}return e("<img />").attr("src",i).attr("title",l).css("margin-top","-6px")},change_with_status_tree:function(n,t){for(var a=e("<tr />"),r=0;r<t._tree_columns;r++){var s=e("<td />").css("height","100%").css("padding","0 0 10px 0").css("margin","0").css("width","16px").css("min-width","16px").css("overflow","hidden").css("vertical-align","top");if(r<n._tree.length&&null!==n._tree[r]&&s.css("background-image","url("+i.default+")").css("background-repeat","repeat-y"),r===n._tree_index&&s.append(this.change_status_icon(n)),-1!==n._tree_branches.indexOf(r)){var u=e("<img />").css("vertical-align","baseline");n._tree_branches.indexOf(r)===n._tree_branches.length-1?u.attr("src",l.default):u.attr("src",o.default),s.append(u)}a.append(s)}var c=360-16*t._tree_columns,d=e("<td />").css("width",c+"px").addClass("zuul-change-cell").append(this.changePanel(n));return a.append(d),e("<table />").addClass("zuul-change-box").css("-moz-box-sizing","content-box").css("box-sizing","content-box").append(a)},pipeline_sparkline:function(n){return""!==c.graphite_url&&e("<img />").addClass("pull-right").attr("src",function(n){return""!==c.graphite_url&&(n in m||(m[n]=e.fn.graphite.geturl({url:c.graphite_url,from:"-8hours",width:100,height:26,margin:0,hideLegend:!0,hideAxes:!0,hideGrid:!0,target:["color(stats.gauges.zuul.pipeline."+n+".current_changes, '6b8182')"]})),m[n])}(n))},pipeline_header:function(n,t){var a=e("<div />").addClass("zuul-pipeline-header"),r=e("<h3 />").css("vertical-align","middle").text(n.name).append(e("<span />").addClass("badge pull-right").css("vertical-align","middle").css("margin-top","0.5em").text(t)).append(this.pipeline_sparkline(n.name));if(a.append(r),"string"==typeof n.description){var s=e("<small />");e.each(n.description.split(/\r?\n\r?\n/),function(n,t){s.append(e("<p />").text(t))}),a.append(e("<p />").append(s))}return a},pipeline:function(n,t){var a=this,r=e("<div />").addClass("zuul-pipeline col-md-4").append(this.pipeline_header(n,t));return e.each(n.change_queues,function(t,s){e.each(s.heads,function(t,i){if(n.change_queues.length>1&&0===t){var l=s.name,o=l;o.length>32&&(o=o.substr(0,32)+"..."),r.append(e("<p />").text("Queue: ").append(e("<abbr />").attr("title",l).text(o)))}e.each(i,function(e,n){var t=a.change_with_status_tree(n,s);r.append(t),a.display_patchset(t)})})}),r},toggle_patchset:function(n){if("a"!==n.target.nodeName.toLowerCase()){var t=e(n.target).parents(".zuul-change");t.children(".zuul-patchset-body").toggle(200);var a=d.indexOf(t.attr("id"));-1===a?d.push(t.attr("id")):d.splice(a,1)}},display_patchset:function(n,t){var a=n.find(".zuul-change"),r=a.attr("id"),s=a.children(".zuul-patchset-body"),i=e("#expand_by_default").prop("checked"),l=d.indexOf(r);i&&-1===l||!i&&-1!==l?s.show(t):s.hide(t);var o=a.find(".change_project").text().toLowerCase(),u=n.parents(".zuul-pipeline").find(".zuul-pipeline-header > h3").html().toLowerCase();if(""!==p){var c=!1,f=p.trim().split(/[\s,]+/);e.each(f,function(e,n){""!==n&&(n=n.toLowerCase(),-1===o.indexOf(n)&&-1===u.indexOf(n)&&-1===r.indexOf(n)||(c=!0))}),!0===c?n.show(t):n.hide(t)}else n.show(t)}},v={schedule:function(n){n=n||this,c.enabled?(n.update().always(function(){setTimeout(function(){n.schedule(n)},5e3)}),_>11&&(_=0,e.zuul.update_sparklines())):setTimeout(function(){n.schedule(n)},5e3)},injest:function(n,t){if("message"in n?t.removeClass("alert-danger").addClass("alert-info").text(n.message).show():t.empty().hide(),"zuul_version"in n&&e("#zuul-version-span").text(n.zuul_version),"last_reconfigured"in n){var a=new Date(n.last_reconfigured);e("#last-reconfigured-span").text(a.toString())}var r=e(c.pipelines_id);r.html(""),e.each(n.pipelines,function(e,n){var t=v.create_tree(n);r.append(b.pipeline(n,t))}),e(c.queue_events_num).text(n.trigger_event_queue?n.trigger_event_queue.length:"0"),e(c.queue_results_num).text(n.result_event_queue?n.result_event_queue.length:"0")},update:function(){g&&g.abort(),this.emit("update-start");var n=this,t=e(c.msg_id);if(null===c.source_data)return g=e.getJSON(c.source).done(function(e){n.injest(e,t)}).fail(function(e,n,a){"abort"!==n&&t.text(c.source+": "+a).addClass("alert-danger").removeClass("zuul-msg-wrap-off").show()}).always(function(){g=void 0,n.emit("update-end")});n.injest(c.source_data,t)},update_sparklines:function(){e.each(m,function(n,t){var a=new Image,r=t.split("#");a.src=r[0]+"#"+(new Date).getTime(),e(a).load(function(){m[n]=a.src})})},emit:function(){return h.trigger.apply(h,arguments),this},on:function(){return h.on.apply(h,arguments),this},one:function(){return h.one.apply(h,arguments),this},controlForm:function(){var n=e("<form />").attr("role","form").addClass("form-inline").submit(this.handleFilterChange);return n.append(this.filterFormGroup()).append(this.expandFormGroup()),n},filterFormGroup:function(){var n=e("<label />").addClass("control-label").attr("for","filter_string").text("Filters").css("padding-right","0.5em"),t=e("<input />").attr("type","text").attr("id","filter_string").addClass("form-control").attr("title","project(s), pipeline(s) or review(s) comma separated").attr("value",p);t.change(this.handleFilterChange);var a=e("<span />").addClass("form-control-feedback").addClass("glyphicon glyphicon-remove-circle").attr("id","filter_form_clear_box").attr("title","clear filter").css("cursor","pointer");return a.click(function(){e("#filter_string").val("").change()}),""===p&&a.hide(),e("<div />").addClass("form-group has-feedback").append(n,t,a)},expandFormGroup:function(){var n="true"===u("zuul_expand_by_default",!1),t=e("<input />").attr("type","checkbox").attr("id","expand_by_default").prop("checked",n).change(this.handleExpandByDefault),a=e("<label />").css("padding-left","1em").html("Expand by default: ").append(t);return e("<div />").addClass("checkbox").append(a)},handleFilterChange:function(){return t("zuul_filter_string",p=e("#filter_string").val()),""===p?e("#filter_form_clear_box").hide():e("#filter_form_clear_box").show(),e(".zuul-change-box").each(function(n,t){var a=e(t);b.display_patchset(a,200)}),!1},handleExpandByDefault:function(n){t("zuul_expand_by_default",n.target.checked),d=[],e(".zuul-change-box").each(function(n,t){var a=e(t);b.display_patchset(a,200)})},create_tree:function(n){var t=0,a=1;return e.each(n.change_queues,function(n,r){var s=[],i=1,l=[],o=0;e.each(r.heads,function(n,t){e.each(t,function(e,n){l[n.id]=n,n._tree_position=e})}),e.each(r.heads,function(n,r){e.each(r,function(n,r){!0===r.live&&(t+=1);var u=s.indexOf(r.id);if(u>-1)for(r._tree_index=u,s[u]=null;null===s[s.length-1];)s.pop();else r._tree_index=0;r._tree_branches=[],r._tree=[],void 0===r.items_behind&&(r.items_behind=[]),r.items_behind.sort(function(e,n){return l[n]._tree_position-l[e]._tree_position}),e.each(r.items_behind,function(e,n){s.push(n),s.length>o&&o>0&&r._tree_branches.push(s.length-1)}),s.length>i&&(i=s.length),s.length>a&&(a=s.length),r._tree=s.slice(0),o=s.length})}),r._tree_columns=i}),n._tree_columns=a,t}};return h=e(v),{options:c,format:b,app:v,jq:h}}}(e)}).call(this,t("EVdn"))},"O/1W":function(e,n,t){"use strict";t("+eM2");var a,r=t("KHwQ"),s=(a=r)&&a.__esModule?a:{default:a};t("bFPc"),t("KqSh");var i=t("KMmB");s.default.module("zuulTenants",[]).controller("mainController",["$scope","$http","$location",function(e,n,t){e.tenants=void 0,e.tenants_fetch=function(){n.get((0,i.getSourceUrl)("tenants",t)).then(function(n){e.tenants=n.data})},e.tenants_fetch()}]),s.default.module("zuulJobs",[],["$locationProvider",function(e){e.html5Mode({enabled:!0,requireBase:!1})}]).controller("mainController",["$scope","$http","$location",function(e,n,t){e.jobs=void 0,e.jobs_fetch=function(){n.get((0,i.getSourceUrl)("jobs",t)).then(function(n){e.jobs=n.data})},e.jobs_fetch()}]),s.default.module("zuulBuilds",[],["$locationProvider",function(e){e.html5Mode({enabled:!0,requireBase:!1})}]).controller("mainController",["$scope","$http","$location",function(e,n,t){e.rowClass=function(e){return"SUCCESS"===e.result?"success":"warning"};var a=t.search(),r=t.url();if(a.source_url)e.tenant=void 0;else{var s=r.lastIndexOf("/",r.lastIndexOf("/builds.html")-1)+1,l=r.lastIndexOf("/builds.html")-s;e.tenant=r.substr(s,l)}e.builds=void 0,a.pipeline?e.pipeline=a.pipeline:e.pipeline="",a.job_name?e.job_name=a.job_name:e.job_name="",a.project?e.project=a.project:e.project="",e.builds_fetch=function(){var a="";e.tenant&&(a+="&tenant="+e.tenant),e.pipeline&&(a+="&pipeline="+e.pipeline),e.job_name&&(a+="&job_name="+e.job_name),e.project&&(a+="&project="+e.project),""!==a&&(a="?"+a.substr(1)),n.get((0,i.getSourceUrl)("builds",t)+a).then(function(n){for(var t=0;t<n.data.length;t+=1){var a=n.data[t];null==a.node_name&&(a.node_name="master"),a.log_url===a.job_name&&(a.log_url=void 0)}e.builds=n.data})},e.builds_fetch()}])},TW4C:function(e,n,t){"use strict";var a,r=t("KHwQ"),s=(a=r)&&a.__esModule?a:{default:a};t("hdJs");var i=t("KMmB");s.default.module("zuulStream",[]).controller("mainController",["$scope","$http","$location",function(e,n,t){window.onload=function(e){var n="";setInterval(function(){console.log("autoScroll"),""!==n&&(document.getElementById("zuulstreamcontent").innerHTML+=n,n="",document.getElementById("autoscroll").checked&&window.scrollTo(0,document.body.scrollHeight))},250);var t=new URL(window.location),a={uuid:t.searchParams.get("uuid")};if(document.getElementById("pagetitle").innerHTML=a.uuid,t.searchParams.has("logfile")){a.logfile=t.searchParams.get("logfile");var r="("+a.logfile+")";document.getElementById("pagetitle").innerHTML+=r}if("undefined"!=typeof BuiltinConfig)a.websocket_url=BuiltinConfig.websocket_url;else if(t.searchParams.has("websocket_url"))a.websocket_url=t.searchParams.get("websocket_url");else{var s="";s="https:"===t.protocol?"wss://":"ws://";var l=(0,i.getSourceUrl)("console-stream",e);a.websocket_url=s+t.host+l}var o=new WebSocket(a.websocket_url);o.onmessage=function(e){console.log("onmessage"),n+=e.data.replace(/[<>&"']/g,function(e){return"&#"+e.charCodeAt(0)+";"})},o.onopen=function(e){console.log("onopen"),o.send(JSON.stringify(a))},o.onclose=function(e){console.log("onclose"),n+="\n--- END OF STREAM ---\n"}}(t)}])},TmGq:function(e,n,t){e.exports=t.p+"dbfefd12cb30c26c924acf70ada2e9b0.png"},WKE0:function(e,n,t){(e.exports=t("I1BE")(!1)).push([e.i,"body#zuulstream {\n  font-family: monospace;\n  background-color: black;\n  color: lightgrey;\n}\n\n#zuulstreamoverlay {\n    position: fixed;\n    top: 5px;\n    right: 5px;\n    background-color: darkgrey;\n    color: black;\n}\n\npre#zuulstreamcontent {\n    white-space: pre;\n    margin: 0px 10px;\n    background-color: black;\n    color: lightgrey;\n    border: none;\n}\n",""])},Xvj7:function(e,n,t){(e.exports=t("I1BE")(!1)).push([e.i,".zuul-change {\n    margin-bottom: 10px;\n}\n\n.zuul-change-id {\n    float: right;\n}\n\n.zuul-job-result {\n    float: right;\n    width: 70px;\n    height: 15px;\n    margin: 2px 0 0 0;\n}\n\n.zuul-change-total-result {\n    height: 10px;\n    width: 100px;\n    margin: 0;\n    display: inline-block;\n    vertical-align: middle;\n}\n\n.zuul-spinner,\n.zuul-spinner:hover {\n    opacity: 0;\n    transition: opacity 0.5s ease-out;\n    cursor: default;\n    pointer-events: none;\n}\n\n.zuul-spinner-on,\n.zuul-spinner-on:hover {\n    opacity: 1;\n    transition-duration: 0.2s;\n    cursor: progress;\n}\n\n.zuul-change-cell {\n    padding-left: 5px;\n}\n\n.zuul-change-job {\n    padding: 2px 8px;\n}\n\n.zuul-job-name {\n    font-size: small;\n}\n\n.zuul-non-voting-desc {\n    font-size: smaller;\n}\n\n.zuul-patchset-header {\n    font-size: small;\n    padding: 8px 12px;\n}\n",""])},"a/ca":function(e,n,t){e.exports=t.p+"c20a5f7b85b3ad41429b811add54955f.png"},bFPc:function(e,n,t){var a=t("Xvj7");"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t("aET+")(a,r);a.locals&&(e.exports=a.locals)},bIJW:function(e,n,t){e.exports=t.p+"6da86d4beaea6c9cdbb59846a65c88d1.png"},fhKC:function(e,n,t){"use strict";t("IHiy"),t("TW4C"),t("O/1W")},gFoc:function(e,n,t){e.exports=t.p+"10c08a88bc7031af2186d98eb9998041.png"},hdJs:function(e,n,t){var a=t("WKE0");"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t("aET+")(a,r);a.locals&&(e.exports=a.locals)},xlo8:function(e,n,t){e.exports=t.p+"588574b26faf1bc1ca8f4d66adaa93c9.png"},yHTP:function(e,n,t){e.exports=t.p+"8c78e2f2c92607edefb893c6d70c5291.png"}},[["fhKC",0,1]]]);
//# sourceMappingURL=main.97620dbaa42d3994a215.js.map